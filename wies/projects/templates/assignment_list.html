{% extends "base.html" %}

{% block content %}

<!-- Header with title and view switcher -->
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem; margin-bottom: 1rem;">
  <h1 class="utrecht-heading-1" style="margin: 0;">Opdrachten</h1>
  
  <!-- Subtle view switcher -->
  <div class="view-switcher">
    <span class="view-switcher-link view-switcher-link--active">
      <span class="utrecht-icon rvo-icon rvo-icon-menu rvo-icon--sm" role="img" aria-label="List"></span>
      Lijst
    </span>
    <span class="view-switcher-separator">|</span>
    <a href="{% url 'assignments-tabs' %}" class="view-switcher-link">
      <span class="utrecht-icon rvo-icon rvo-icon-map rvo-icon--sm" role="img" aria-label="Tabs"></span>
      Tabs
    </a>
  </div>
</div>

<form id="assignment-filter-form"
      hx-get="{{ request.path }}"
      hx-target="#assignment_table"
      hx-swap="outerHTML"
      class="rvo-layout-grid rvo-layout-gap--md rvo-layout-grid-columns--two"
      style="margin-bottom: 1rem;">
    <div class="rvo-layout-column rvo-layout-gap--sm">
        <label for="name-search" class="rvo-label">Naam</label>
        <input type="text" 
               id="name-search" 
               name="name" 
               value="{{ request.GET.name|default:'' }}"
               placeholder="Zoek op naam of opdrachtgever..."
               class="utrecht-textbox utrecht-textbox--html-input"
               hx-get="{{ request.path }}" 
               hx-target="#assignment_table" 
               hx-trigger="keyup delay:300ms">
    </div>
    <div class="rvo-layout-column rvo-layout-gap--sm" style="align-self: end; text-align: right;">
        <a href="/assignments/new">
          <button
            class="utrecht-button utrecht-button--primary-action utrecht-button--rvo-md utrecht-button--icon-before"
            type="button"
          >
            <span
              class="utrecht-icon rvo-icon rvo-icon-plus rvo-icon--md rvo-icon--wit"
              role="img"
              aria-label="Plus"
            ></span>
            Nieuwe opdracht toevoegen
          </button>
        </a>
    </div>
</form>


{% include 'parts/assignment_table.html' %}

<style>
.view-switcher {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
  color: var(--rvo-color-grijs-600, #6b7280);
}

.view-switcher-link {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  color: var(--rvo-color-grijs-600, #6b7280);
  text-decoration: none;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.view-switcher-link:hover {
  color: var(--rvo-color-logoblauw, #003366);
  background-color: var(--rvo-color-grijs-100, #f5f5f5);
  text-decoration: none;
}

.view-switcher-link--active {
  color: var(--rvo-color-logoblauw, #003366);
  font-weight: 500;
}

.view-switcher-separator {
  color: var(--rvo-color-grijs-400, #9ca3af);
  font-weight: 300;
}
</style>

{% endblock content %}
