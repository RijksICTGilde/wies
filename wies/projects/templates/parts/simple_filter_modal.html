<!-- Filter systeem met inline expandable section -->
<div class="rvo-layout-column rvo-layout-gap--md">
  <!-- Primaire filters -->
  <form hx-get="{% url target_url %}" hx-target="{{ target_element }}" class="primary-form">
    <div class="rvo-layout-row rvo-layout-gap--md rvo-p--md rvo-bg--white rvo-border-radius--md rvo-border--sm">
      <div class="rvo-form-field">
        <input 
          type="text" 
          name="search" 
          class="utrecht-textbox utrecht-textbox--html-input"
          placeholder="Zoek op collega of opdracht..." 
          value="{{ request.GET.search|default:'' }}" 
          hx-get="{% url target_url %}" 
          hx-target="{{ target_element }}" 
          hx-trigger="input delay:500ms"
          style="min-width: 300px;">
      </div>
      
      <div class="rvo-form-field">
        <select 
          name="client" 
          class="utrecht-select utrecht-select--html-select"
          multiple
          hx-get="{% url target_url %}" 
          hx-target="{{ target_element }}" 
          hx-trigger="change"
          style="min-width: 250px; height: 120px;"
          id="client-multiselect">
          {% load projects_tags %}
          {% get_clients as clients %}
          {% for client in clients %}
            <option value="{{ client.id }}" {% if client.id in request.GET.getlist:'client' %}selected{% endif %}>{{ client.text }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
  </form>
  
  <!-- Expandable filters sectie -->
  <details class="rvo-checkbox-filter" id="extra-filters">
    <summary class="rvo-checkbox-filter__label">
      <span class="utrecht-icon rvo-icon rvo-icon-filter rvo-icon--sm" role="img" aria-label="Filters"></span>
      Extra filters
      <span class="rvo-checkbox-filter__icon utrecht-icon rvo-icon rvo-icon-pijl-omhoog rvo-icon--sm" role="img" aria-label="Uitklappen"></span>
    </summary>
    
    <div class="rvo-checkbox-filter__checkbox-container">
      <form hx-get="{% url target_url %}" hx-target="{{ target_element }}">
        <!-- Behoud primaire filter waarden -->
        <input type="hidden" name="search" value="{{ request.GET.search|default:'' }}">
        {% for client in request.GET.getlist:'client' %}
          <input type="hidden" name="client" value="{{ client }}">
        {% endfor %}
        
        <div class="rvo-layout-column rvo-layout-gap--lg rvo-p--md">
          <!-- Periode sectie -->
          <div class="rvo-form-section">
            <h4 class="rvo-heading rvo-heading--h4 rvo-mb--md">Periode</h4>
            <div class="rvo-layout-grid rvo-layout-grid--cols-2 rvo-layout-gap--md">
              <div class="rvo-form-field">
                <label class="rvo-form-field__label" for="start_date_from">Startdatum vanaf</label>
                <input type="date" 
                       id="start_date_from"
                       name="start_date_from" 
                       class="utrecht-textbox utrecht-textbox--html-input"
                       value="{{ request.GET.start_date_from|default:'' }}" 
                       hx-get="{% url target_url %}" 
                       hx-target="{{ target_element }}" 
                       hx-trigger="change">
              </div>
              <div class="rvo-form-field">
                <label class="rvo-form-field__label" for="start_date_to">Startdatum tot</label>
                <input type="date" 
                       id="start_date_to"
                       name="start_date_to" 
                       class="utrecht-textbox utrecht-textbox--html-input"
                       value="{{ request.GET.start_date_to|default:'' }}"
                       hx-get="{% url target_url %}" 
                       hx-target="{{ target_element }}" 
                       hx-trigger="change">
              </div>
              <div class="rvo-form-field">
                <label class="rvo-form-field__label" for="end_date_from">Einddatum vanaf</label>
                <input type="date" 
                       id="end_date_from"
                       name="end_date_from" 
                       class="utrecht-textbox utrecht-textbox--html-input"
                       value="{{ request.GET.end_date_from|default:'' }}"
                       hx-get="{% url target_url %}" 
                       hx-target="{{ target_element }}" 
                       hx-trigger="change">
              </div>
              <div class="rvo-form-field">
                <label class="rvo-form-field__label" for="end_date_to">Einddatum tot</label>
                <input type="date" 
                       id="end_date_to"
                       name="end_date_to" 
                       class="utrecht-textbox utrecht-textbox--html-input"
                       value="{{ request.GET.end_date_to|default:'' }}"
                       hx-get="{% url target_url %}" 
                       hx-target="{{ target_element }}" 
                       hx-trigger="change">
              </div>
            </div>
          </div>
          
          <!-- Rollen sectie -->
          <div class="rvo-form-section">
            <h4 class="rvo-heading rvo-heading--h4 rvo-mb--md">Rollen</h4>
            <div class="rvo-form-field">
              <select 
                name="skill" 
                class="js-skills-select-single utrecht-select utrecht-select--html-select"
                hx-get="{% url target_url %}" 
                hx-target="{{ target_element }}" 
                hx-trigger="change"
                data-selected-value="{{ request.GET.skill|default:'' }}">
                <option value="">Alle rollen</option>
              </select>
            </div>
          </div>
          
          <!-- Specifieke filters sectie -->
          <div class="rvo-form-section">
            <h4 class="rvo-heading rvo-heading--h4 rvo-mb--md">Specifieke filters</h4>
            <div class="rvo-layout-grid rvo-layout-grid--cols-2 rvo-layout-gap--md">
              <div class="rvo-form-field">
                <label class="rvo-form-field__label" for="consultant">Collega</label>
                <input type="text" 
                       id="consultant"
                       name="consultant" 
                       class="utrecht-textbox utrecht-textbox--html-input"
                       placeholder="Zoek op collega naam..." 
                       value="{{ request.GET.consultant|default:'' }}"
                       hx-get="{% url target_url %}" 
                       hx-target="{{ target_element }}" 
                       hx-trigger="input delay:500ms">
              </div>
              <div class="rvo-form-field">
                <label class="rvo-form-field__label" for="assignment">Opdracht</label>
                <input type="text" 
                       id="assignment"
                       name="assignment" 
                       class="utrecht-textbox utrecht-textbox--html-input"
                       placeholder="Zoek op opdracht naam..."
                       value="{{ request.GET.assignment|default:'' }}"
                       hx-get="{% url target_url %}" 
                       hx-target="{{ target_element }}" 
                       hx-trigger="input delay:500ms">
              </div>
            </div>
          </div>
          
          <!-- Filter acties -->
          <div class="rvo-layout-row rvo-layout-gap--md">
            <button type="button" 
                    onclick="clearFilters()" 
                    class="utrecht-button utrecht-button--secondary-action utrecht-button--rvo-sm">
              Filters wissen
            </button>
          </div>
        </div>
      </form>
    </div>
  </details>
</div>

<script>
function clearFilters() {
  window.location.href = '{% url target_url %}';
}
</script>