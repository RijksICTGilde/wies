<!-- Generic Filter Modal -->
<div id="filterModal" class="filter-modal">
  <div class="filter-modal-content">
    <!-- Modal Header -->
    <div class="filter-modal-header">
      <h2 class="utrecht-heading-2" style="margin: 0;">Filters</h2>
      <button type="button" onclick="closeFilterModal()" class="filter-modal-close">&times;</button>
    </div>

    <!-- Modal Form -->
    <form id="modalFilterForm" class="filter-modal-form">
      <div class="rvo-layout-column rvo-layout-gap--md">
        
        {% for filter_group in filter_groups %}
        {% if filter_group.type == 'select' %}
        <!-- Select Filter -->
        <div class="utrecht-form-field">
          <div class="rvo-form-field__label">
            <label class="rvo-label" for="modal-{{ filter_group.name }}">{{ filter_group.label }}</label>
          </div>
          <div class="rvo-select-wrapper">
            <select name="{{ filter_group.name }}" id="modal-{{ filter_group.name }}" class="utrecht-select utrecht-select--html-select rvo-select">
              <option value="">{{ filter_group.placeholder }}</option>
              {% for option in filter_group.options %}
                <option value="{{ option.value }}" {% if request.GET|lookup:filter_group.name == option.value|stringformat:"s" %}selected{% endif %}>
                  {{ option.label }}
                </option>
              {% endfor %}
            </select>
          </div>
        </div>
        {% elif filter_group.type == 'date_range' %}
        <!-- Date Range Filters -->
        <div class="rvo-layout-grid rvo-layout-gap--md rvo-layout-grid-columns--two">
          <div class="utrecht-form-field">
            <div class="rvo-form-field__label">
              <label class="rvo-label" for="modal-{{ filter_group.name }}-from">{{ filter_group.from_label }}</label>
            </div>
            <input 
              type="date" 
              id="modal-{{ filter_group.name }}-from" 
              name="{{ filter_group.name }}_from" 
              class="utrecht-textbox utrecht-textbox--html-input rvo-input" 
              value="{{ request.GET|lookup:filter_group.name_from }}" 
            />
          </div>
          <div class="utrecht-form-field">
            <div class="rvo-form-field__label">
              <label class="rvo-label" for="modal-{{ filter_group.name }}-to">{{ filter_group.to_label }}</label>
            </div>
            <input 
              type="date" 
              id="modal-{{ filter_group.name }}-to" 
              name="{{ filter_group.name }}_to" 
              class="utrecht-textbox utrecht-textbox--html-input rvo-input" 
              value="{{ request.GET|lookup:filter_group.name_to }}" 
            />
          </div>
        </div>
        {% endif %}
        {% endfor %}

      </div>

      <!-- Modal Footer -->
      <div class="filter-modal-footer">
        <button type="button" onclick="clearAllFilters()" class="utrecht-button utrecht-button--subtle utrecht-button--warning utrecht-button--rvo-md rvo-button">
          Wis alle filters
        </button>
        <div class="filter-modal-footer-buttons">
          <button type="button" onclick="closeFilterModal()" class="utrecht-button utrecht-button--secondary-action utrecht-button--rvo-md rvo-button">
            Annuleren
          </button>
          <button type="button" onclick="applyFilters()" class="utrecht-button utrecht-button--primary-action utrecht-button--rvo-md rvo-button">
            Toepassen
          </button>
        </div>
      </div>
    </form>
  </div>
</div>