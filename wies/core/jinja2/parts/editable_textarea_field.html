<div class="editable-field-display">
  {% if field_value %}
    {% set is_long = field_value|length > 300 %}
    {% if is_long %}
      <span class="editable-field-value">
        <span class="editable-field-text editable-field-text--block truncated-text">{{ field_value[:300] }}...</span>
        <span class="editable-field-text editable-field-text--block full-text"
              style="display: none">{{ field_value }}</span>
        <a href="#"
           class="show-more-link editable-field-toggle"
           onclick="event.preventDefault(); const container = this.parentElement; container.querySelector('.truncated-text').style.display = container.querySelector('.truncated-text').style.display === 'none' ? 'block' : 'none'; container.querySelector('.full-text').style.display = container.querySelector('.full-text').style.display === 'none' ? 'block' : 'none'; this.textContent = this.textContent === 'Toon meer' ? 'Toon minder' : 'Toon meer';">Toon meer</a>
      </span>
    {% else %}
      <span class="editable-field-text">{{ field_value }}</span>
    {% endif %}
  {% else %}
    <span class="rvo-text--italic rvo-text--subtle">Niet ingevuld</span>
  {% endif %}
  {% if user_can_edit %}
    <button type="button"
            class="edit-icon-button"
            hx-get="{{ edit_url }}"
            hx-target="#{{ target_element }}"
            hx-swap="innerHTML"
            aria-label="Bewerk {{ field_label }}">
      <span class="utrecht-icon rvo-icon rvo-icon-bewerken rvo-icon--md"
            role="img"
            aria-label="Bewerk"></span>
    </button>
  {% endif %}
</div>
