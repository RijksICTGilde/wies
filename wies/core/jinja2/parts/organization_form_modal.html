<dialog id="{{ modal_element_id }}" class="modal-dialog" closedby="any">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="utrecht-heading-2">{{ modal_title }}</h2>
      <button type="button" class="close modal-close-button">Ã—</button>
    </div>
    <form method="post"
          action="{{ form_post_url }}"
          hx-post="{{ form_post_url }}"
          hx-target="#{{ target_element_id }}">
      {{ get_csrf_hidden_input(request) }}
      <div class="modal-body">
        <div class="modal-form-fields">
          {% if organization and organization.is_from_external_source %}
            <div class="rvo-alert rvo-alert--info modal-alert--spaced">
              <p>De gegevens komen uit een externe bron en zijn daarom niet bewerkbaar.</p>
            </div>
          {% endif %}
          {{ content.name.as_field_group() }}
          {{ content.abbreviations_input.as_field_group() }}
          {{ content.organization_type.as_field_group() }}
          {{ content.parent.as_field_group() }}
          {{ content.is_active.as_field_group() }}
          {% if organization %}
            {% if organization.source_url or organization.tooi_identifier or organization.oin_number %}
              <div class="modal-info-box">
                <div class="rvo-text rvo-text--sm rvo-text--bold modal-info-box__title">Overheidsregisters</div>
                {% if organization.source_url %}
                  <div class="rvo-text rvo-text--sm">
                    <strong>Bron:</strong>
                    <a href="{{ organization.source_url }}" target="_blank" rel="noopener">organisaties.overheid.nl</a>
                  </div>
                {% endif %}
                {% if organization.tooi_identifier %}
                  <div class="rvo-text rvo-text--sm">
                    <strong>TOOI:</strong>
                    <a href="{{ organization.tooi_identifier }}"
                       target="_blank"
                       rel="noopener">
                      {{ organization.tooi_identifier | replace('https://identifier.overheid.nl/tooi/', '') }}
                    </a>
                  </div>
                {% endif %}
                {% if organization.oin_number %}
                  <div class="rvo-text rvo-text--sm">
                    <strong>OIN:</strong> {{ organization.oin_number }}
                  </div>
                {% endif %}
              </div>
            {% endif %}
            {% if not can_delete %}
              <div class="rvo-alert rvo-alert--warning modal-alert--spaced">
                <p>
                  <strong>Let op:</strong>
                  {% if organization.is_from_external_source or organization.tooi_identifier %}
                    Deze organisatie komt uit het overheidsregister en kan daarom niet worden verwijderd.
                  {% elif organization.children.exists() and organization.assignment_relations.exists() %}
                    Deze organisatie heeft onderliggende eenheden en gekoppelde opdrachten. Verwijderen is niet mogelijk.
                  {% elif organization.children.exists() %}
                    Deze organisatie heeft onderliggende eenheden. Verwijderen is niet mogelijk.
                  {% else %}
                    Deze organisatie heeft gekoppelde opdrachten. Verwijderen is niet mogelijk.
                  {% endif %}
                </p>
              </div>
            {% endif %}
          {% endif %}
        </div>
      </div>
      <div class="modal-footer">
        <div class="modal-footer-buttons">
          <div class="close">
            <c-button kind="secondary" type="button">Annuleren</c-button>
          </div>
          {% if can_delete and delete_url %}
            <c-button kind="warning-subtle" hx-get="{{ delete_url }}" hx-target="#{{ modal_element_id }}" hx-swap="innerHTML">Verwijderen</c-button>
          {% endif %}
        </div>
        {% if organization and organization.is_from_external_source %}
          <c-button kind="primary" type="button" class="close">Sluiten</c-button>
        {% else %}
          <c-button kind="primary" type="submit">{{ form_button_label }}</c-button>
        {% endif %}
      </div>
    </form>
  </div>
</dialog>
