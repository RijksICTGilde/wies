<div class="category-section" id="category-{{ category.name|lower }}">
  <div class="category-header" style="display: flex; align-items: center; justify-content: space-between;">
    <c-h2 style="margin: 0;">{{ category.name }}</c-h2>
    <c-button kind="tertiary" 
              icon="bewerken"
              iconPlacement="after"
              hx-get="{{ url('label-category-edit', kwargs={'pk': category.pk}) }}"
              hx-target="#labelFormModal"
              hx-swap="innerHTML">
      Bewerk categorie
    </c-button>
  </div>
</div>

{% if category.labels.all() %}
<div class="rvo-table--responsive">
    <table class="rvo-table">
    <thead class="rvo-table__head">
        <tr class="rvo-table-row">
            <th scope="col" class="rvo-table-header">Naam</th>
            <th scope="col" class="rvo-table-header">Toegepast</th>
        </tr>
    </thead>
    <tbody class="rvo-table-body">
        {% for label in category.labels.all() %}
        <tr class="rvo-table-row clickable-row"
            hx-get="{{ url('label-edit', kwargs={'pk': label.pk}) }}"
            hx-target="#labelFormModal"
            hx-swap="innerHTML"
            title="Bewerk {{ label.name }}">
            <td class="rvo-table-cell"><span class="rvo-badge" style="background-color: {{ label.category.color }}; padding: 0.25rem 0.5rem; border-radius: 3px;"">{{ label.name }}</span></td>
            <td class="rvo-table-cell">
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <span>{{ label.usage_count|default(0) }}</span>
                    <span class="utrecht-icon rvo-icon rvo-icon-bewerken rvo-icon--md rvo-icon--hemelblauw" role="img" aria-label="Bewerken" style="flex-shrink: 0;"></span>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
    </table>
</div>
<div style="padding: 1rem 0.75rem 0 0.75rem;">
    <form hx-post="/admin/labels/category/{{ category.id }}/labels/create/" hx-headers='{"X-CSRFToken": "{{ get_csrf_token(request) }}"}' hx-target="#label_category_{{ category.id }}" style="display: flex; gap: 0.5rem; align-items: flex-start; max-width: 600px;">
        <c-input name="name" style="flex: 1;"/>
        <c-button kind="secondary" 
                  icon="plus"
                  iconPlacement="before"
                  type="submit">
            Label toevoegen
        </c-button>
    </form>
    {% if errors and errors.name%}
        <div style="margin-top: 0.5rem; color: #e73636;">{{ errors.name }}</div>
    {% endif %}
</div>
{% else %}
<p style="margin-top: 1rem; color: #666;">Geen labels in deze categorie</p>
<div style="padding: 1rem 0.75rem 0 0.75rem;">
    <form hx-post="/admin/labels/category/{{ category.id }}/labels/create/" hx-headers='{"X-CSRFToken": "{{ get_csrf_token(request) }}"}' hx-target="#label_category_{{ category.id }}" style="display: flex; gap: 0.5rem; align-items: flex-start; max-width: 600px;">
        <c-input name="name" style="flex: 1;"/>
        <c-button kind="secondary" 
                  icon="plus"
                  iconPlacement="before"
                  type="submit">
            Label toevoegen
        </c-button>
    </form>
    {% if errors and errors.name%}
        <div style="margin-top: 0.5rem; color: #e73636;">{{ errors.name }}</div>
    {% endif %}
</div>
{% endif %}

